<!--

    Copyright © 2015 Instituto Superior Técnico

    This file is part of Bennu OAuth.

    Bennu OAuth is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Bennu OAuth is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with Bennu OAuth.  If not, see <http://www.gnu.org/licenses/>.

-->
<h2 class="page-header" translate>Authorizations</h2>

<div>
	<div>
		<h4>
			<div ng-show="authorizations" class="col-sm-5 pull-right">
				<form class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-2 control-label" translate >Find</label>
						<div class="col-sm-10">
							<input type="text" ng-model="query" class="form-control" />
						</div>
					</div>
				</form>
			</div>
		</h4>

		<table class="table">

			<thead>
				<tr>
					<th></th>
					<th>
						<a href="" ng-click="predicate = 'applicationName'; reverse=!reverse">
							<span translate>Name</span>
						</a>
					</th>
					
					<th>
						<a href="" ng-click="predicate = 'applicationAuthor'; reverse=!reverse">
							<span translate>Author</span>
						</a>
					</th>
					
					<th>
						<a href="" ng-click="predicate = 'applicationDescription'; reverse=!reverse">
							<span translate>Description</span>
						</a>
					</th>
					
					<th>
						<a href="" ng-click="predicate = 'applicationScopes'; reverse=!reverse">
							<span translate>Scopes</span>
						</a>
					</th>
					
					<th>
						<a href="" ng-click="predicate = 'applicationSite'; reverse=!reverse">
							<span translate>Site</span>
						</a>
					</th>					
					
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr
					ng-repeat="authorization in authorizations | filter: filterApplications | orderBy:predicate:reverse">
					<td class="col-sm-1" style="vertical-align: middle">
						<div>
							<img ng-src="{{authorization.getLogoUrl}}" height="50px;">
						</div>
					</td>
					<td class="col-sm-1" style="vertical-align: middle">{{authorization.applicationName}}</td>
					<td class="col-sm-1" style="vertical-align: middle">{{authorization.applicationAuthor}}</td>
					<td class="col-sm-1" style="vertical-align: middle">{{authorization.applicationDescription}}</td>
					<td class="col-sm-1" style="vertical-align: middle">{{authorization.applicationScopes
						| scopeNames}}</td>

					<td class="col-sm-1" style="vertical-align: middle"><a
						href="{{authorization.applicationSiteUrl}}">{{authorization.applicationSiteUrl}}</a></td>



					<td class="col-sm-1" style="vertical-align: middle">
						<div class="btn-group">

							<button ng-click="showDetails(authorization)" role="button"
								class="btn btn-sm" translate>Details</button>

							<button data-target="#modal-revoke-menu" role="button"
								class="btn btn-danger btn-sm"
								ng-click="showRevokeModal(authorization)" translate >Revoke</button>
						</div>
					</td>

				</tr>
			</tbody>
		</table>
		<hr />

		<div id="modal-revoke-menu" class="modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h3>Revoke Application</h3>
					</div>
					<div class="modal-body">
						<p translate>Do you wish to revoke the selected application?</p>

					</div>
					<div class="modal-footer">
						<button data-dismiss="modal" class="btn secondary btn-sm" translate>No</button>

						<button ng-click="revokeApp()" data-dismiss="modal"
							class="btn btn-danger btn-sm" translate>Yes</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
a {
	color: #4b565c;
}
</style>
