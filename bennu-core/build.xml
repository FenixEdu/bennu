<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="compile" name="MyOrg">

	<property environment="env"/>
	<property name="encoding" value="UTF-8"/>

	<property file="build.properties"/>

	<property name="lib" location="lib"/>

	<target name="prepare-build">
		<java classname="tools.compile.BuildfileGenerator" fork="true">
			<classpath>
			    <fileset dir="${lib}">
			        <include name="compile-tools.jar"/>
                </fileset>
			</classpath>
			<arg value="build_compile_aux.xml"/>
			<arg value="${project.dirs}"/>
			<arg value="${modules.default.src.dir}"/>
		</java>
	</target>

	<target name="clean-all" depends="prepare-build" description="Removes any generated files">
		<ant antfile="build_compile.xml" target="clean-all"/>
	</target>

	<target name="prepare" depends="prepare-build" description="Create necessary dirs">
		<ant antfile="build_compile.xml" target="prepare"/>
	</target>

	<target name="compile" depends="prepare-build" description="Compiles code">
		<ant antfile="build_compile.xml" target="compile"/>
	</target>

	<target name="war" depends="prepare-build" description="Generates a web archive of the application.">
		<ant antfile="build_compile.xml" target="war"/>
	</target>

    <target name="seed" description="Seed a module project.">
    	<copy todir="${dir}">
    		<fileset dir="seed"/>
    	</copy>
    	<replace file="${dir}/.project">
			<replacefilter token="@module-name@" value="${module-name}"/>
    	</replace>
    </target>

</project>
